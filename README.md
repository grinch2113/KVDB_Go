# 介绍
kv数据库是指Key-Value数据库，是一种以键值对作为存储数据的数据库，类似一个大的哈希表。其中每一个键都有唯一对应的一个值。
本数据库是一个基于文件的kv数据库，文件路径为./Database/MyDB.kvdb，支持以下操作：

* set: 写入一个key-value对，需要用户输入一个key值和对应的value值，以追加的形式写入到文件中。
* get: 读取出一个key值对应的value值，其中key值由用户输入。
* delete: 删除一个key-value对，需要用户输入一个key值，然后程序查找出文件中的key-value对并将其删除。

### 为了提高数据库的操作速度，对数据库文件的所有操作都必须为顺序读写

#  迭代一
##  内容：
实现set操作和get操作，具体细节如下：
* set: 让用户输入一个key值和一个value值，以key值-空格-value值-换行的形式追加到文件末尾，如写入key值为ab，value值为cd，则文件内容应该如下
```
(...其他k-v对)
ab cd
(文件末尾)
```
* get: 让用户输入一个key值，然后逐行读取文件，若找到用户输入的key值，则记录下对应的value值，直到文件读取结束

##  缺陷
1. 若输入的key值和value值中含空格，则会发生读取错误。
2. 当对同一个key值进行多次set操作之后，文件中的无效数据将越来越多。


#  迭代二
##  内容：
1. 将文件写入和读取方式改为二进制写入和读取，以解决上一次迭代的读取错误问题。
2. 实现delete操作，以删除文件中的一个k-v对
3. 新增内置purge操作，清空文件中的无效数据。该操作不可手动调用，只能通过set和delete函数调用

具体实现细节如下：
* 定义一个结构体kvGroup，属性有key值的长度，key值，value值长度，value值。
* 在set操作中，用户输入kv对后生成一个kvGroup结构体实例，将这个实例序列化写入到文件中，最终文件中一个kv组合的存储格式如下:
```
key长度(4bytes)key值(key长度bytes)value长度(4bytes)value值(value长度bytes)
```
* 读取kv对时，先读取4bytes的key长度，然后读取key值，再读取4bytes的value长度，最后读取value值。
* 在get操作中，用户输入key值后开始读取文件，先读取key长度，若key长度对不上则直接跳到下一个kv对，若长度对得上再读取key值判断是否与用户输入的相同。
* 在delete操作中，将key值的长度变为相反数，即文件中key长度为负数的kv对是已经被删除的。get操作读取到ky长度为负数则直接跳过
* purge操作分为以下步骤：
1. 从文件读取出所有有效的kv对到内存中
2. 将所有有效的kv对写入到另一个文件中
3. 删除原文件，将新文件命名为原文件
